<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ°å¹³çº¿ (Horizon) - Alluxio æ•°æ®æŒ–æ˜æ¶æ„æ¼”è¿›å² (å®Œæ•´ç‰ˆ)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Noto+Sans+SC:wght@300;400;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-dark: #0f172a;
            --comic-paper: #ffffff;
            --primary-blue: #2563eb;
            --hero-accent: #f59e0b;
            --danger-red: #dc2626;
            --success-green: #16a34a;
            --purple-plan: #7c3aed;
            --border-thick: 3px solid #000;
            --shadow-hard: 8px 8px 0px rgba(0,0,0,1);
        }

        body {
            margin: 0;
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--bg-dark);
            color: #1e293b;
            overflow-x: hidden;
        }

        /* --- åŠ¨æ€èƒŒæ™¯ Canvas --- */
        #canvas-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; opacity: 0.1; pointer-events: none;
        }

        /* --- å¯¼èˆªæ  --- */
        .nav-bar {
            position: sticky; top: 0; z-index: 999; 
            background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(10px);
            padding: 15px; display: flex; justify-content: center; gap: 20px;
            border-bottom: 1px solid #333;
        }

        .toggle-btn {
            background: #334155; color: #94a3b8; border: 2px solid #475569;
            padding: 10px 25px; font-family: 'Bangers'; letter-spacing: 1px; font-size: 1.1rem;
            cursor: pointer; transition: all 0.3s; clip-path: polygon(10% 0, 100% 0, 90% 100%, 0% 100%);
        }
        .toggle-btn.active {
            background: var(--hero-accent); color: #000; border-color: #fff;
            transform: scale(1.1); text-shadow: 0 0 10px rgba(255,255,255,0.5);
            clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); 
        }

        /* --- é€šç”¨æ’ç‰ˆ --- */
        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.6s cubic-bezier(0.22, 1, 0.36, 1); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .section {
            min-height: 90vh; padding: 80px 20px;
            display: flex; justify-content: center; align-items: center;
        }

        /* --- æ¼«ç”»åˆ†é•œæ¡† (Panel) --- */
        .comic-panel {
            background: var(--comic-paper);
            border: var(--border-thick);
            box-shadow: var(--shadow-hard);
            max-width: 1200px; width: 100%;
            display: grid; grid-template-columns: 1.2fr 1fr;
            overflow: hidden; position: relative;
        }

        /* æ¼«ç”»é€Ÿåº¦çº¿èƒŒæ™¯ */
        .speed-lines {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(90deg, transparent, transparent 20px, rgba(0,0,0,0.03) 20px, rgba(0,0,0,0.03) 21px);
            z-index: 0; pointer-events: none;
        }

        /* å†…å®¹åˆ— */
        .col-text { padding: 50px; position: relative; z-index: 2; display: flex; flex-direction: column; justify-content: center; }
        .col-visual { 
            background: #f1f5f9; border-left: var(--border-thick); position: relative; 
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 30px; overflow: hidden;
        }

        /* æ–‡å­—æ ·å¼ */
        .chapter-tag {
            font-family: 'Bangers'; font-size: 1.5rem; color: #64748b; margin-bottom: 10px;
            text-transform: uppercase; letter-spacing: 2px;
        }
        h2 {
            font-family: 'Noto Sans SC'; font-weight: 900; font-size: 2.5rem; margin: 0 0 20px 0;
            line-height: 1.2;
        }
        .text-story p { font-size: 1.1rem; line-height: 1.8; color: #334155; margin-bottom: 20px; }
        .text-tech p, .text-tech li { font-family: 'Segoe UI', monospace; font-size: 1rem; line-height: 1.6; color: #0f172a; }
        
        /* æ°”æ³¡ */
        .speech-bubble {
            background: #fff; border: 2px solid #000; border-radius: 20px 20px 20px 0;
            padding: 20px; margin-bottom: 25px; position: relative;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.1);
        }
        .speech-bubble::before {
            content: ''; position: absolute; bottom: -12px; left: 0;
            border-width: 12px 12px 0; border-style: solid; border-color: #000 transparent;
        }

        /* æŒ‰é’® */
        .action-btn {
            background: #000; color: #fff; border: none; padding: 15px 30px;
            font-family: 'Bangers'; font-size: 1.2rem; cursor: pointer;
            margin-top: 20px; transition: transform 0.1s;
            box-shadow: 4px 4px 0 var(--hero-accent);
        }
        .action-btn:hover { transform: translate(-2px, -2px); box-shadow: 6px 6px 0 var(--hero-accent); }
        .action-btn:active { transform: translate(2px, 2px); box-shadow: 0px 0px 0 var(--hero-accent); }

        /* --- ç‰¹æ®Šç»„ä»¶æ ·å¼ --- */
        
        /* ä»ªè¡¨ç›˜ */
        .gauge-container { display: flex; gap: 20px; justify-content: center; width: 100%; margin: 20px 0; }
        .gauge-box { text-align: center; position: relative; width: 140px; }
        .gauge-arc {
            width: 140px; height: 70px; background: #e2e8f0; border-radius: 70px 70px 0 0;
            border: 2px solid #000; border-bottom: none; overflow: hidden; position: relative;
        }
        .gauge-color {
            width: 100%; height: 100%; position: absolute; top: 0; left: 0;
            background: conic-gradient(from 180deg, #22c55e 0deg, #eab308 120deg, #ef4444 180deg);
            transform-origin: center bottom;
        }
        .gauge-needle {
            width: 4px; height: 60px; background: #000; position: absolute; bottom: 0; left: 68px;
            transform-origin: bottom center; transform: rotate(-90deg); transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .gauge-label { font-family: 'Bangers'; font-size: 1.5rem; margin-top: 5px; display: block; }

        /* ç«é€Ÿæ¡ */
        .race-track { width: 100%; margin-bottom: 25px; }
        .race-meta { display: flex; justify-content: space-between; font-weight: bold; margin-bottom: 5px; font-size: 0.9rem; }
        .race-bar-shell { height: 35px; background: #cbd5e1; border: 2px solid #000; position: relative; border-radius: 4px; }
        .race-bar-fill {
            height: 100%; width: 0%; background: var(--primary-blue);
            display: flex; align-items: center; justify-content: flex-end;
            padding-right: 10px; color: #fff; font-weight: bold; font-family: monospace;
            transition: width 1.5s cubic-bezier(0.25, 1, 0.5, 1);
        }
        .flag-icon { opacity: 0; transform: scale(0); transition: all 0.3s; margin-left: 10px; color: var(--hero-accent); font-size: 1.5rem; }

        /* IDE æ¨¡æ‹Ÿå™¨ */
        .ide-wrapper { width: 100%; background: #1e1e1e; border: 2px solid #000; border-radius: 8px; overflow: hidden; }
        .ide-tabs { background: #252526; display: flex; border-bottom: 1px solid #333; }
        .ide-tab { padding: 10px 20px; color: #ccc; cursor: pointer; font-size: 0.8rem; font-family: monospace; }
        .ide-tab.active { background: #1e1e1e; color: #fff; border-top: 2px solid var(--primary-blue); }
        .ide-content { padding: 20px; font-family: 'Consolas', monospace; color: #d4d4d4; font-size: 0.9rem; min-height: 120px; }
        .ide-console { background: #000; padding: 10px; font-family: monospace; color: #0f0; border-top: 1px solid #333; height: 80px; overflow-y: auto; font-size: 0.8rem; }
        
        /* æ´å¯Ÿå¡ç‰‡ (Chapter 6) */
        .cards-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; }
        .insight-card {
            background: #fff; border: 2px solid #000; padding: 15px; border-radius: 8px;
            text-align: center; transition: transform 0.3s;
        }
        .insight-card:hover { transform: translateY(-5px); box-shadow: 4px 4px 0 rgba(0,0,0,0.1); }
        .ic-icon { font-size: 1.5rem; margin-bottom: 5px; }
        .ic-val { font-family: 'Bangers'; font-size: 1.8rem; color: var(--primary-blue); line-height: 1.2; }
        .ic-desc { font-size: 0.85rem; color: #64748b; line-height: 1.3; margin-top: 5px; }

        /* å“åº”å¼ */
        @media (max-width: 960px) {
            .comic-panel { grid-template-columns: 1fr; }
            .col-visual { height: 350px; border-left: none; border-top: var(--border-thick); }
            h2 { font-size: 2rem; }
        }
    </style>
</head>
<body>

    <canvas id="canvas-bg"></canvas>

    <div class="nav-bar">
        <button class="toggle-btn active" id="btn-story" onclick="setMode('story')">ğŸ“– æ¼«ç”»æ•…äº‹æ¨¡å¼</button>
        <button class="toggle-btn" id="btn-tech" onclick="setMode('tech')">âš™ï¸ æŠ€æœ¯æå®¢æ¨¡å¼</button>
    </div>

    <div style="height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: white;">
        <div style="font-family: 'Bangers'; font-size: 3rem; color: var(--hero-accent); text-shadow: 3px 3px 0 #000;">HORIZON ROBOTICS (åœ°å¹³çº¿)</div>
        <h1 style="font-family: 'Noto Sans SC'; font-weight: 900; font-size: 3.5rem; margin: 20px 0; text-shadow: 0 0 20px rgba(37, 99, 235, 0.8);">
            æ•°æ®æŒ–æ˜æ¶æ„æ¼”è¿›å²
        </h1>
        <p style="font-size: 1.5rem; max-width: 700px; color: #cbd5e1; font-weight: 300;">
            å½“ 300PB è‡ªåŠ¨é©¾é©¶æ•°æ®é‡ä¸Š 10 ä¸‡å¹¶å‘ä»»åŠ¡ï¼Œ<br>
            ä»¥åŠä¸€ä½æ‚£æœ‰â€œæ‰‹æ»‘ç—‡â€çš„ 112 æ ¸å·¨äººç®¡ç†å‘˜ã€‚
        </p>
        <div style="margin-top: 50px; animation: bounce 2s infinite;">
            <i class="fas fa-chevron-down" style="font-size: 2rem; color: var(--hero-accent);"></i>
        </div>
    </div>

    <div class="section">
        <div class="comic-panel">
            <div class="speed-lines"></div>
            
            <div class="col-text">
                <div class="chapter-tag">Chapter 01</div>
                <div class="text-story fade-in">
                    <h2 style="color: var(--danger-red);">å›¾ä¹¦é¦†å¤§æ‹¥å µ</h2>
                    <div class="speech-bubble">
                        <i class="fas fa-quote-left"></i> 
                        æˆ‘æ˜¯æ—§ç®¡ç†å‘˜ JFSã€‚ä»¥å‰æ¯å¤©æ¥å‡ ç™¾äººè¿˜è¡Œï¼Œä»Šå¤©çªç„¶æ¥äº† <strong>10ä¸‡ä¸ªå­¦ç”Ÿ</strong>ï¼ä»–ä»¬å…¨æŒ¤åœ¨é—¨å£é—®æˆ‘ï¼šâ€œã€Šæœºå™¨äººæ—¥è®°ã€‹åœ¨å“ªï¼Ÿâ€
                    </div>
                    <p><strong>åœºæ™¯ï¼š</strong> 300PB çš„æ•°æ®å°±åƒå‡ ç™¾äº¿æœ¬ä¹¦ã€‚ç°åœ¨çš„è§„çŸ©æ˜¯ï¼Œæ‰€æœ‰äººéƒ½è¦ç»è¿‡æˆ‘è¿™ä¸ªâ€œæ€»ç®¡â€æŸ¥ç›®å½•ã€‚</p>
                    <p><strong>ç»“å±€ï¼š</strong> æˆ‘å—“å­å–Šå“‘äº†ï¼ˆMaster ç“¶é¢ˆï¼‰ï¼Œå¤§å…å µå¾—æ°´æ³„ä¸é€šï¼Œæƒ³å¼€åˆ†åº—ï¼ˆå¤šé›†ç¾¤ï¼‰åˆå¯¼è‡´ä¹¦æ”¾å¾—ä¹±ä¸ƒå…«ç³Ÿã€‚</p>
                </div>
                <div class="text-tech hidden fade-in">
                    <h2>Architecture Bottleneck</h2>
                    <p><strong>Background:</strong> 300PB Data (BOS + JFS), 5~10 Tb/s Throughput requirement.</p>
                    <p><strong>Current Pain Points (JFS):</strong></p>
                    <ul>
                        <li><strong>Centralized Metadata:</strong> JFS Master node cannot handle 100k+ concurrent connections. Open/Lookup requests timeout under load.</li>
                        <li><strong>Data Silos:</strong> Forced to split into multiple physical clusters to mitigate Master load, complicating O&M.</li>
                        <li><strong>Scalability:</strong> Cannot linearly scale with task growth.</li>
                    </ul>
                </div>
            </div>

            <div class="col-visual" id="viz-c1">
                <i class="fas fa-network-wired" style="font-size: 5rem; color: #ccc; margin-bottom: 20px;"></i>
                <div style="background: #fff; padding: 10px 20px; border: 2px solid #000; font-family: monospace; font-weight: bold;">
                    STATUS: <span id="status-c1" style="color: var(--danger-red);">CONGESTED (BLOCKED)</span>
                </div>
                <div style="margin-top: 10px; font-size: 0.8rem; color: #666;">* Simulation: 100k requests > Master QPS Limit</div>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="comic-panel" style="border-color: var(--hero-accent);">
            <div class="col-visual">
                <div style="font-weight: bold; margin-bottom: 15px;">RESOURCE MONITOR (PER NODE)</div>
                <div class="gauge-container">
                    <div class="gauge-box">
                        <div class="gauge-arc"><div class="gauge-color"></div><div class="gauge-needle" id="needle-jfs"></div></div>
                        <span class="gauge-label" style="color: var(--danger-red);" id="val-jfs">850</span>
                        <small>JFS (Handles)</small>
                    </div>
                    <div class="gauge-box">
                        <div class="gauge-arc"><div class="gauge-color"></div><div class="gauge-needle" id="needle-all"></div></div>
                        <span class="gauge-label" style="color: var(--success-green);" id="val-all">150</span>
                        <small>Alluxio (Handles)</small>
                    </div>
                </div>
                <button class="action-btn" onclick="simStress()">ğŸ’¥ æ–½åŠ  10 ä¸‡å¹¶å‘å‹åŠ›</button>
            </div>

            <div class="col-text">
                <div class="chapter-tag">Chapter 02</div>
                
                <div class="text-story fade-in">
                    <h2 style="color: var(--hero-accent);">å·¨äººæ‰‹æ»‘ä¸çªå‡»æ£€æŸ¥</h2>
                    <p><strong>ä¸»è§’ï¼š</strong> ç®¡ç†å‘˜â€œå¤§åŠ›ç¥â€ï¼ˆ112æ ¸ CPU èŠ‚ç‚¹ï¼‰ã€‚</p>
                    <div class="speech-bubble">
                        <i class="fas fa-hand-paper"></i> 
                        <span style="color: var(--danger-red); font-weight: bold;">å±æœºä¸€ï¼šæ‰‹ä¸å¤Ÿç”¨äº†ï¼</span><br>
                        è€æ¿è§„å®šæˆ‘æ‰‹é‡Œåªèƒ½æ‹¿ 1000 æœ¬ä¹¦ï¼ˆå¥æŸ„ï¼‰ã€‚JFS æ¨¡å¼ä¸‹ï¼Œä¸ºäº†å¿«ï¼Œæˆ‘æ—¶åˆ»æç€ 800 å¤šæœ¬ã€‚ç¨å¾®å¤šæ¥ç‚¹ä»»åŠ¡ï¼Œæˆ‘å°±è¦å´©ç›˜äº†ï¼
                    </div>
                    <div class="speech-bubble">
                        <i class="fas fa-stopwatch"></i>
                        <span style="color: var(--hero-accent); font-weight: bold;">å±æœºäºŒï¼šçªå‡»æ£€æŸ¥ï¼ˆå†·è¯»ï¼‰</span><br>
                        æ— æ³•é¢„ä¹ ï¼ˆNo Job Loadï¼‰ã€‚æ¯æ¬¡æ‰¾æ–°ä¹¦ï¼Œæˆ‘éƒ½å¾—å…ˆè·‘å»é—®æ€»ç®¡ã€‚è¿™è·‘è…¿æ—¶é—´å¤ªé•¿ï¼Œæµªè´¹äº†æˆ‘çš„è‚Œè‚‰ï¼ˆ112æ ¸ç®—åŠ›ï¼‰ã€‚
                    </div>
                </div>

                <div class="text-tech hidden fade-in">
                    <h2>Resource & Latency Constraints</h2>
                    <p><strong>Constraint 1: File Handles (fd)</strong></p>
                    <ul>
                        <li><strong>Limit:</strong> `ulimit -n 1000` per Node.</li>
                        <li><strong>Risk:</strong> JFS process occupies ~850 handles permanently. High risk of `Too many open files` crash during peak concurrency.</li>
                        <li><strong>Alluxio Advantage:</strong> Connection pooling & lightweight SDK keeps usage < 200.</li>
                    </ul>
                    <p><strong>Constraint 2: Cold Read Latency</strong></p>
                    <ul>
                        <li><strong>Challenge:</strong> Random access pattern prevents pre-warming (Job Load).</li>
                        <li><strong>Alluxio Advantage:</strong> DORA architecture uses Consistent Hashing. Client calculates Worker location directly, eliminating Master Lookup RTT.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="comic-panel">
            <div class="speed-lines"></div>
            <div class="col-text">
                <div class="chapter-tag">Chapter 03</div>
                
                <div class="text-story fade-in">
                    <h2 style="color: var(--success-green);">æ™ºèƒ½å¹³æ¿æ—¶ä»£</h2>
                    <p>ä»¥å‰ï¼Œæ¯ä¸ªå­¦ç”Ÿè¦çœ‹ä¹¦éƒ½å¾—å…ˆå»åŠä¸€å¼ ç¹ççš„â€œå®ä½“å€Ÿä¹¦è¯â€ï¼ˆFUSE æŒ‚è½½ï¼‰ï¼Œä¸ä»…æ…¢ï¼Œè¿˜å®¹æ˜“æŠŠå›¾ä¹¦é¦†ç³»ç»ŸææŒ‚ã€‚</p>
                    <p>ç°åœ¨ï¼ŒAlluxio ç»™æ¯äººå‘äº†ä¸€ä¸ª<strong>â€œPython æ™ºèƒ½å¹³æ¿â€</strong> (SDK)ã€‚</p>
                    <ul style="line-height: 2;">
                        <li>âœ… <strong>å…åŠè¯ï¼š</strong> ä¸ç”¨æŒ‚è½½ï¼Œä»£ç ç›´æ¥è¿è¡Œã€‚</li>
                        <li>âœ… <strong>æé€Ÿç¿»é¡µï¼š</strong> åŸç”Ÿæ”¯æŒ MCAP çš„è·³é¡µï¼ˆSeekï¼‰åŠŸèƒ½ã€‚</li>
                        <li>âœ… <strong>æ›´çœç”µï¼š</strong> ä¸æ¶ˆè€—ç³»ç»Ÿ CPU å»åšæ ¼å¼è½¬æ¢ã€‚</li>
                    </ul>
                </div>

                <div class="text-tech hidden fade-in">
                    <h2>DevEx: FUSE vs SDK</h2>
                    <p><strong>Legacy Way (JuiceFS FUSE):</strong></p>
                    <ul>
                        <li>Heavy Context Switch (User Space -> Kernel -> User Space).</li>
                        <li>High CPU overhead consumes the 112-core potential.</li>
                        <li>Complex deployment (Privileged container required).</li>
                    </ul>
                    <p><strong>Modern Way (Alluxio SDK):</strong></p>
                    <ul>
                        <li><strong>Zero-Copy:</strong> Direct memory access.</li>
                        <li><strong>Simplified Stack:</strong> Pure user-space client.</li>
                        <li><strong>MCAP Optimized:</strong> Native support for HTTP Range Requests for efficient Seek.</li>
                    </ul>
                </div>
            </div>

            <div class="col-visual" style="background: #0f172a; border-left: none;">
                <div class="ide-wrapper">
                    <div class="ide-tabs">
                        <div class="ide-tab active" id="tab-jfs" onclick="switchCode('jfs')">Legacy (JFS)</div>
                        <div class="ide-tab" id="tab-all" onclick="switchCode('all')">Modern (Alluxio)</div>
                    </div>
                    <div class="ide-content" id="code-display">
                        # Loading...
                    </div>
                    <div class="ide-console" id="console-display">
                        > System Ready.
                    </div>
                </div>
                <button class="action-btn" onclick="runCode()" style="background: #22c55e; border-color: #fff;">â–¶ è¿è¡Œä»£ç ä»¿çœŸ</button>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="comic-panel" style="border-color: var(--primary-blue); box-shadow: 15px 15px 0 var(--primary-blue);">
            <div class="col-visual" style="background: #fff;">
                <h3 style="font-family: 'Bangers'; margin-bottom: 30px;">ğŸ† BENCHMARK: 7.3GB SINGLE TOPIC</h3>
                
                <div class="race-track">
                    <div class="race-meta">
                        <span>JuiceFS (Hot Read)</span>
                        <span>221 MB/s</span>
                    </div>
                    <div class="race-bar-shell">
                        <div class="race-bar-fill" id="bar-jfs" style="width: 0%; background: #94a3b8;">221</div>
                    </div>
                </div>

                <div class="race-track">
                    <div class="race-meta">
                        <span style="color: var(--primary-blue);">Alluxio (Hot Read)</span>
                        <span style="color: var(--primary-blue);">280.7 MB/s</span>
                    </div>
                    <div class="race-bar-shell">
                        <div class="race-bar-fill" id="bar-all" style="width: 0%; background: var(--primary-blue);">
                            280.7 <i class="fas fa-flag-checkered flag-icon" id="flag-icon"></i>
                        </div>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 20px; color: #64748b; font-size: 0.9rem;">
                    * Data Source: Horizon POC Scenario 1 (Single Topic)
                </div>
                <button class="action-btn" onclick="startRace()" style="background: var(--primary-blue);">ğŸ å¼€å§‹å®æˆ˜ç«é€Ÿ</button>
            </div>

            <div class="col-text">
                <div class="chapter-tag">Chapter 04</div>
                
                <div class="text-story fade-in">
                    <h2 style="color: var(--primary-blue);">ç»ˆæå¯¹å†³</h2>
                    <div class="speech-bubble">
                        <i class="fas fa-gavel"></i> 
                        è£åˆ¤ï¼ˆå®¢æˆ·ï¼‰è¯´ï¼šâ€œåˆ«å…‰è¯´ä¸ç»ƒï¼Œä¸Šè·‘é“ï¼â€
                    </div>
                    <p>æˆ‘ä»¬æ¬å‡ºäº† <strong>7.3 GB çš„â€œå¤§é“ä¹¦â€</strong> (å• Topic æ–‡ä»¶) è¿›è¡Œçƒ­è¯»æµ‹è¯•ã€‚</p>
                    <p><strong>JFS:</strong> æ‹¼äº†å‘½è·‘åˆ°äº† <strong>221 MB/s</strong>ã€‚</p>
                    <p><strong>Alluxio:</strong> å‡­å€Ÿä¼˜ç§€çš„ç¼“å­˜æœºåˆ¶ï¼Œç›´æ¥é£™åˆ°äº† <strong>280.7 MB/s</strong>ï¼</p>
                    <p style="font-weight: bold; color: var(--success-green);">ç»“è®ºï¼šä¸ä»…æ‰‹ä¸æŠ–äº†ï¼ˆå¥æŸ„ä½ï¼‰ï¼Œè·‘å¾—è¿˜æ¯”ä»¥å‰å¿«äº† 27%ï¼</p>
                </div>

                <div class="text-tech hidden fade-in">
                    <h2>Benchmark Results</h2>
                    <p><strong>Scenario 1: Read Single Topic File (7.3GB)</strong></p>
                    <ul>
                        <li><strong>JuiceFS Hot Read:</strong> 221 MB/s (Baseline).</li>
                        <li><strong>Alluxio Hot Read:</strong> 280.71 MB/s.</li>
                        <li><strong>Improvement:</strong> <span style="color: var(--success-green); font-weight: bold;">+27% Throughput</span>.</li>
                    </ul>
                    <p><strong>Significance:</strong></p>
                    <p>In high-throughput sequential read scenarios common in AD data mining, Alluxio demonstrates superior data locality and reduced overhead.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="comic-panel" style="border-color: var(--purple-plan);">
            <div class="speed-lines" style="background: radial-gradient(circle, transparent 20%, rgba(124, 58, 237, 0.1) 100%);"></div>
            
            <div class="col-text">
                <div class="chapter-tag">Chapter 05</div>
                
                <div class="text-story fade-in">
                    <h2 style="color: var(--purple-plan);">å®ä¼Ÿè“å›¾ (POC)</h2>
                    <div class="speech-bubble" style="border-color: var(--purple-plan);">
                        <i class="fas fa-map-marked-alt"></i> 
                        æ¯”èµ›åªæ˜¯å¼€å§‹ã€‚æˆ‘ä»¬è¦æŠŠè¿™åº§å›¾ä¹¦é¦†å½»åº•ç°ä»£åŒ–ï¼
                    </div>
                    <p><strong>Step 1: æ¢è„‘æ‰‹æœ¯</strong><br>æŠŠæœºå™¨äººçš„æ—§èŠ¯ç‰‡ï¼ˆè‡ªç ” SDKï¼‰ç›´æ¥å¯¹æ¥ Alluxioï¼Œæ‰”æ‰ FUSEã€‚</p>
                    <p><strong>Step 2: é­”é¬¼ç‰¹è®­</strong><br>æ¨¡æ‹Ÿå†·è¯»ï¼ˆçªå‡»æ£€æŸ¥ï¼‰å’Œçƒ­è¯»ï¼ˆèƒŒè¯µå…¨æ–‡ï¼‰ï¼Œè¦†ç›–å• Topic å’Œå¤š Topic åœºæ™¯ã€‚</p>
                    <p><strong>Step 3: å¤åˆ¶å·¨äºº</strong><br>ä» 1 ä¸ªèŠ‚ç‚¹æ‰©å……åˆ° 10 ä¸ªï¼Œæœ€ç»ˆæ”¯æ’‘ 1000+ å¹¶å‘ã€‚</p>
                </div>

                <div class="text-tech hidden fade-in">
                    <h2>POC Roadmap</h2>
                    <ul>
                        <li><strong>Phase 1: Integration</strong><br>Embed Alluxio Python SDK into Horizon's proprietary data loader. Bypass FUSE completely.</li>
                        <li><strong>Phase 2: Validation</strong><br>Verify performance on 7.3GB (Single), 2.3GB (10 Topics), and 29.4GB (128 Topics) datasets.</li>
                        <li><strong>Phase 3: Scale Out</strong><br>Expand from 3 nodes to 10+ nodes (112 Cores each) to simulate high-concurrency production load.</li>
                    </ul>
                </div>
            </div>

            <div class="col-visual" style="background: #faf5ff;">
                <div style="display: flex; flex-direction: column; gap: 20px; width: 100%;">
                    <div class="insight-card" id="card-step1" style="opacity: 0.5;">
                        <div class="ic-icon">ğŸ”Œ</div>
                        <div class="ic-val" style="font-size: 1.5rem;">INTEGRATION</div>
                        <div class="ic-desc">Remove FUSE, Embed SDK</div>
                    </div>
                    <div class="insight-card" id="card-step2" style="opacity: 0.5;">
                        <div class="ic-icon">ğŸ§ª</div>
                        <div class="ic-val" style="font-size: 1.5rem;">VALIDATION</div>
                        <div class="ic-desc">Verify Cold/Hot Read Scenarios</div>
                    </div>
                    <div class="insight-card" id="card-step3" style="opacity: 0.5;">
                        <div class="ic-icon">ğŸ“ˆ</div>
                        <div class="ic-val" style="font-size: 1.5rem;">SCALE OUT</div>
                        <div class="ic-desc">10+ Nodes, 1000+ Tasks</div>
                    </div>
                    <button class="action-btn" onclick="animRoadmap()" style="background: var(--purple-plan);">ğŸš€ å¯åŠ¨ POC è®¡åˆ’</button>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="comic-panel" style="border-color: #333; box-shadow: 15px 15px 0 #333;">
            <div class="col-text">
                <div class="chapter-tag">Chapter 06</div>
                
                <div class="text-story fade-in">
                    <h2>æµ‹è¯•ç»“è®ºä¸æœªæ¥</h2>
                    <div class="speech-bubble">
                        <i class="fas fa-lightbulb"></i> <span style="font-weight:bold;">ä¸‰å¤§æ ¸å¿ƒå‘ç°ï¼š</span>
                    </div>
                    <ul style="list-style: none; padding: 0; font-size: 1.1rem; line-height: 2;">
                        <li><i class="fas fa-check-circle" style="color:var(--success-green)"></i> <strong>è®°æ€§å¥½å°±æ˜¯å¿«ï¼š</strong> çƒ­è¯»æ€§èƒ½è¿œè¶…å†·è¯»ï¼Œè¯æ˜ç¼“å­˜æå…¶æœ‰æ•ˆã€‚</li>
                        <li><i class="fas fa-forward" style="color:var(--primary-blue)"></i> <strong>çŒœä½ ä¼šè¯»ï¼š</strong> å¼€å¯ Prefetchï¼Œååé‡ç¿»äº†è¿‘ 2 å€ï¼</li>
                        <li><i class="fas fa-filter" style="color:var(--hero-accent)"></i> <strong>æŒ‘é£Ÿæ¯”è¾ƒæ…¢ï¼š</strong> é¡ºåºè¯»å¤§æ–‡ä»¶å¾ˆå¿«ï¼›å¦‚æœè¦åœ¨å¤š Topic é‡Œç­›é€‰å°æ•°æ®ï¼Œä¼šç¨å¾®æ…¢ä¸€ç‚¹ã€‚</li>
                    </ul>
                    <div style="margin-top: 30px; padding: 15px; background: #f3e8ff; border-left: 5px solid var(--purple-plan);">
                        <strong>æœªæ¥å¤§æ‹›ï¼šè¯»å¿ƒæœ¯ (Seek Preload)</strong><br>
                        å½“ä½ æƒ³ç¿»åˆ°ç¬¬ 100 é¡µæ—¶ (Seek)ï¼Œæˆ‘æå‰æŠŠé‚£ä¸€ç« éƒ½å‡†å¤‡å¥½ï¼
                    </div>
                </div>

                <div class="text-tech hidden fade-in">
                    <h2>Summary & Analysis</h2>
                    <p><strong>1. Cache Efficacy:</strong></p>
                    <p>Significant delta between Hot and Cold reads confirms Alluxio cache layer is critical for reducing BOS latency.</p>
                    
                    <p><strong>2. The Prefetch Boost:</strong></p>
                    <p>Enabling Prefetch doubled throughput from <strong>10.19 MB/s to 29.34 MB/s</strong>. Even a small prefetch pool is better than none.</p>
                    
                    <p><strong>3. Access Pattern Impact:</strong></p>
                    <ul>
                        <li><strong>Sequential (Single Topic):</strong> 280.71 MB/s.</li>
                        <li><strong>Sparse (Multi-Topic Filter):</strong> 29.34 MB/s. Filtering overhead is non-negligible.</li>
                    </ul>

                    <p><strong>Optimization Plan (Future):</strong></p>
                    <p>Implement <strong>Seek-Triggered Preload</strong>. When client calls `seek()`, Alluxio asynchronously fetches the chunk's index/meta or full content based on access patterns.</p>
                </div>
            </div>

            <div class="col-visual" style="background: #fff; border-left: 3px solid #000;">
                <div class="cards-grid">
                    <div class="insight-card">
                        <div class="ic-icon" style="color: var(--primary-blue);">ğŸš€</div>
                        <div class="ic-val">2x UP</div>
                        <div class="ic-desc">Prefetch å¼€å¯åæå‡<br>(10.19 -> 29.34 MB/s)</div>
                    </div>
                    <div class="insight-card">
                        <div class="ic-icon" style="color: var(--success-green);">ğŸ”¥</div>
                        <div class="ic-val">280 MB/s</div>
                        <div class="ic-desc">å• Topic çƒ­è¯»åå<br>æ€§èƒ½è¡¨ç°æœ€ä½³</div>
                    </div>
                    <div class="insight-card">
                        <div class="ic-icon" style="color: var(--hero-accent);">ğŸ“‰</div>
                        <div class="ic-val">29 MB/s</div>
                        <div class="ic-desc">å¤š Topic ç­›é€‰è¯»å–<br>(ç­›é€‰å¼€é”€è¾ƒå¤§)</div>
                    </div>
                    <div class="insight-card" style="border-color: var(--purple-plan);">
                        <div class="ic-icon" style="color: var(--purple-plan);">ğŸ”®</div>
                        <div class="ic-val" style="font-size: 1.4rem;">Seek Preload</div>
                        <div class="ic-desc">æœªæ¥ä¼˜åŒ–æ–¹å‘<br>Trigger on Seek()</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div style="text-align: center; padding: 40px; color: #64748b;">
        &copy; 2025 Alluxio x Horizon Robotics Joint Solution Proposal
    </div>

    <script>
        // --- é€»è¾‘æ§åˆ¶ ---
        
        let currentMode = 'story';

        // åˆ‡æ¢æ¨¡å¼å‡½æ•°
        function setMode(mode) {
            currentMode = mode;
            
            // æŒ‰é’®çŠ¶æ€
            document.getElementById('btn-story').className = mode === 'story' ? 'toggle-btn active' : 'toggle-btn';
            document.getElementById('btn-tech').className = mode === 'tech' ? 'toggle-btn active' : 'toggle-btn';

            // å†…å®¹åˆ‡æ¢
            const storyEls = document.querySelectorAll('.text-story');
            const techEls = document.querySelectorAll('.text-tech');

            if (mode === 'story') {
                storyEls.forEach(el => el.classList.remove('hidden'));
                techEls.forEach(el => el.classList.add('hidden'));
                updateLogs('story');
            } else {
                storyEls.forEach(el => el.classList.add('hidden'));
                techEls.forEach(el => el.classList.remove('hidden'));
                updateLogs('tech');
            }
            
            resetAnimations();
        }

        // æ›´æ–°æ—¥å¿—/çŠ¶æ€æ–‡æœ¬
        function updateLogs(mode) {
            const c1Status = document.getElementById('status-c1');
            if(mode === 'story') {
                c1Status.innerHTML = "å µæ­» (CONGESTED)";
            } else {
                c1Status.innerHTML = "CONGESTED (BLOCKED)";
            }
        }

        // åŠ¨ç”»é‡ç½®
        function resetAnimations() {
            // é‡ç½®ä»ªè¡¨ç›˜
            document.getElementById('needle-jfs').style.transform = 'rotate(-90deg)';
            document.getElementById('val-jfs').innerText = '0';
            document.getElementById('needle-all').style.transform = 'rotate(-90deg)';
            document.getElementById('val-all').innerText = '0';

            // é‡ç½®ç«é€Ÿæ¡
            document.getElementById('bar-jfs').style.width = '0%';
            document.getElementById('bar-all').style.width = '0%';
            document.getElementById('flag-icon').style.opacity = '0';
            document.getElementById('flag-icon').style.transform = 'scale(0)';

            // é‡ç½® Roadmap
            for(let i=1; i<=3; i++) {
                document.getElementById(`card-step${i}`).style.opacity = '0.5';
                document.getElementById(`card-step${i}`).style.transform = 'translateY(0)';
            }
        }

        // ç¬¬äºŒç« ï¼šå‹åŠ›æµ‹è¯•åŠ¨ç”»
        function simStress() {
            const needleJ = document.getElementById('needle-jfs');
            const valJ = document.getElementById('val-jfs');
            const needleA = document.getElementById('needle-all');
            const valA = document.getElementById('val-all');

            let vJ = 0, vA = 0;
            const targetJ = 850; // JFS High
            const targetA = 150; // Alluxio Low

            const interval = setInterval(() => {
                // JFS æ¨¡æ‹ŸæŠ–åŠ¨é£™å‡
                if(vJ < targetJ) vJ += 20;
                let jitterJ = vJ + (Math.random() * 50 - 25);
                if(jitterJ > 1000) jitterJ = 1000;
                let degJ = (jitterJ / 1000) * 180 - 90;
                
                needleJ.style.transform = `rotate(${degJ}deg)`;
                valJ.innerText = Math.floor(jitterJ);
                if(jitterJ > 900) valJ.style.color = "var(--danger-red)";

                // Alluxio æ¨¡æ‹Ÿç¨³å®š
                if(vA < targetA) vA += 5;
                let jitterA = vA + (Math.random() * 10 - 5);
                let degA = (jitterA / 1000) * 180 - 90;
                
                needleA.style.transform = `rotate(${degA}deg)`;
                valA.innerText = Math.floor(jitterA);

            }, 30);

            setTimeout(() => clearInterval(interval), 2000);
        }

        // ç¬¬ä¸‰ç« ï¼šä»£ç åˆ‡æ¢ä¸è¿è¡Œ
        let codeLang = 'jfs';
        const codeSnippets = {
            jfs: `# Legacy JFS (FUSE)
import os

def read_data(offset):
    # Context Switch: User -> Kernel
    # High CPU Overhead
    with open("/mnt/jfs/data.mcap", "rb") as f:
        f.seek(offset)
        return f.read(1024)`,
            all: `# Modern Alluxio SDK
from alluxio import Client

def read_data(offset):
    client = Client("horizon-cluster")
    # Zero-Copy, Direct Access
    with client.open("s3://data.mcap") as f:
        return f.read_range(offset, 1024)`
        };

        function switchCode(type) {
            codeLang = type;
            document.getElementById('tab-jfs').className = type === 'jfs' ? 'ide-tab active' : 'ide-tab';
            document.getElementById('tab-all').className = type === 'all' ? 'ide-tab active' : 'ide-tab';
            document.getElementById('code-display').innerText = codeSnippets[type];
            document.getElementById('console-display').innerText = "> Ready.";
        }

        function runCode() {
            const consoleEl = document.getElementById('console-display');
            consoleEl.innerText = "> Running...";
            setTimeout(() => {
                if(codeLang === 'jfs') {
                    consoleEl.innerHTML = "> [WARN] CPU Usage High (System > 60%)\n> [INFO] Read 1024 bytes (Latency: 15ms)";
                } else {
                    consoleEl.innerHTML = "> [INFO] Zero-Copy Read Successful.\n> [INFO] Read 1024 bytes (Latency: 2ms)";
                }
            }, 800);
        }

        // ç¬¬å››ç« ï¼šç«é€ŸåŠ¨ç”»
        function startRace() {
            const bJ = document.getElementById('bar-jfs');
            const bA = document.getElementById('bar-all');
            const flag = document.getElementById('flag-icon');

            // Reset
            bJ.style.width = '0%';
            bA.style.width = '0%';
            flag.style.opacity = '0';
            flag.style.transform = 'scale(0)';

            setTimeout(() => {
                // JFS -> 78% (Relative to 280)
                bJ.style.width = '78%'; 
                // Alluxio -> 100%
                bA.style.width = '100%';

                setTimeout(() => {
                    flag.style.opacity = '1';
                    flag.style.transform = 'scale(1)';
                }, 1500);
            }, 100);
        }

        // ç¬¬äº”ç« ï¼šRoadmap åŠ¨ç”»
        function animRoadmap() {
            const steps = [1, 2, 3];
            steps.forEach((step, index) => {
                setTimeout(() => {
                    const card = document.getElementById(`card-step${step}`);
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(-10px)';
                    card.style.boxShadow = '0 10px 20px rgba(124, 58, 237, 0.2)';
                    card.style.border = '2px solid var(--purple-plan)';
                }, index * 600);
            });
        }

        // Canvas èƒŒæ™¯åŠ¨ç”» (ç®€åŒ–ç‰ˆç²’å­)
        const canvas = document.getElementById('canvas-bg');
        const ctx = canvas.getContext('2d');
        let w, h;
        const particles = [];

        function initCanvas() {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
            particles.length = 0;
            for(let i=0; i<50; i++) {
                particles.push({
                    x: Math.random() * w, y: Math.random() * h,
                    vx: (Math.random() - 0.5) * 1, vy: (Math.random() - 0.5) * 1,
                    size: Math.random() * 3 + 1
                });
            }
        }

        function animateCanvas() {
            ctx.clearRect(0, 0, w, h);
            ctx.fillStyle = '#2563eb';
            particles.forEach(p => {
                p.x += p.vx; p.y += p.vy;
                if(p.x < 0 || p.x > w) p.vx *= -1;
                if(p.y < 0 || p.y > h) p.vy *= -1;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fill();
            });
            requestAnimationFrame(animateCanvas);
        }

        window.addEventListener('resize', initCanvas);
        initCanvas();
        animateCanvas();
        switchCode('jfs'); // Init Code

    </script>
</body>
</html>
