<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ°å¹³çº¿ (Horizon) - Alluxio æ•°æ®æŒ–æ˜æ¶æ„æ¼”è¿›æŠ¥å‘Š</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Noto+Sans+SC:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-dark: #121212;
            --comic-white: #ffffff;
            --primary: #3b82f6; /* ç§‘æŠ€è“ */
            --accent: #f59e0b;  /* æ¼«ç”»é»„ */
            --danger: #ef4444;  /* è­¦å‘Šçº¢ */
            --success: #10b981; /* æˆåŠŸç»¿ */
            --purple: #8b5cf6;  /* è“å›¾ç´« */
            --border: 3px solid #000;
            --shadow: 6px 6px 0px rgba(0,0,0,0.8);
        }

        body {
            margin: 0;
            font-family: 'Noto Sans SC', sans-serif;
            background-color: var(--bg-dark);
            color: #333;
            overflow-x: hidden;
        }

        /* --- åŠ¨æ€èƒŒæ™¯ --- */
        #canvas-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; opacity: 0.15; pointer-events: none;
        }

        /* --- UI ç»„ä»¶ --- */
        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .btn {
            border: var(--border); background: var(--accent); color: #000;
            padding: 10px 20px; font-family: 'Bangers'; font-size: 1.2rem; cursor: pointer;
            box-shadow: var(--shadow); transition: transform 0.1s; text-transform: uppercase;
        }
        .btn:active { transform: translate(2px, 2px); box-shadow: 2px 2px 0 #000; }
        .btn.active { background: var(--primary); color: #fff; }

        /* --- æ¼«ç”»åˆ†é•œå®¹å™¨ --- */
        .section { padding: 60px 20px; display: flex; justify-content: center; }
        
        .comic-panel {
            background: var(--comic-white);
            border: var(--border);
            box-shadow: 10px 10px 0px rgba(255,255,255,0.1);
            max-width: 1100px; width: 100%;
            display: grid; grid-template-columns: 1fr 1fr;
            position: relative; overflow: hidden;
        }

        .speed-lines {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(0,0,0,0.02) 10px, rgba(0,0,0,0.02) 20px);
            z-index: 0; pointer-events: none;
        }

        .content-col { padding: 40px; position: relative; z-index: 1; display: flex; flex-direction: column; justify-content: center; }
        .visual-col { 
            background: #f1f5f9; border-left: var(--border); position: relative; 
            display: flex; align-items: center; justify-content: center; overflow: hidden; flex-direction: column;
        }

        /* æ°”æ³¡ä¸æ ‡é¢˜ */
        .speech-bubble {
            background: #fff; border: 2px solid #000; border-radius: 15px; padding: 15px;
            margin-bottom: 20px; position: relative; box-shadow: 4px 4px 0 rgba(0,0,0,0.1); font-weight: bold;
        }
        .speech-bubble::after {
            content: ''; position: absolute; bottom: -10px; left: 20px;
            border-width: 10px 10px 0; border-style: solid; border-color: #000 transparent;
        }
        
        .comic-title { font-family: 'Bangers'; font-size: 2.5rem; margin-bottom: 1rem; text-transform: uppercase; line-height: 1; }
        .text-danger { color: var(--danger); }
        .text-success { color: var(--success); }
        .text-accent { color: var(--accent); }
        .text-purple { color: var(--purple); }

        /* --- è§†è§‰å…ƒç´ ï¼šæ´å¯Ÿå¡ç‰‡ (Chapter 6) --- */
        .insight-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 90%; }
        .insight-card { 
            background: white; border: 2px solid #000; padding: 15px; border-radius: 8px; 
            box-shadow: 4px 4px 0 rgba(0,0,0,0.1); transition: transform 0.3s;
        }
        .insight-card:hover { transform: translateY(-5px); }
        .insight-icon { font-size: 1.5rem; margin-bottom: 10px; }
        .insight-val { font-family: 'Bangers'; font-size: 1.5rem; color: var(--primary); }
        .insight-desc { font-size: 0.8rem; color: #666; margin-top: 5px; line-height: 1.4; }

        /* --- è§†è§‰å…ƒç´ ï¼šæ¶æ„åŠ¨ç”» --- */
        .arch-node {
            position: absolute; border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-weight: bold; font-size: 0.8rem; color: white; box-shadow: 0 0 10px rgba(0,0,0,0.3); z-index: 2;
        }
        .node-master { width: 80px; height: 80px; background: var(--danger); top: 50%; left: 50%; transform: translate(-50%,-50%); }
        .node-worker { width: 50px; height: 50px; background: var(--success); transition: all 0.3s; }
        .data-dot { position: absolute; width: 8px; height: 8px; border-radius: 50%; pointer-events: none; z-index: 1; }

        /* --- è§†è§‰å…ƒç´ ï¼šä»ªè¡¨ç›˜ --- */
        .gauge-wrap { width: 160px; text-align: center; margin: 10px; }
        .gauge-body {
            width: 160px; height: 80px; background: #ddd; border-radius: 80px 80px 0 0; position: relative;
            overflow: hidden; border: 2px solid #000;
        }
        .gauge-gradient {
            width: 100%; height: 100%; position: absolute; top: 0; left: 0;
            background: conic-gradient(from 180deg, #10b981 0deg, #f59e0b 100deg, #ef4444 180deg);
        }
        .gauge-needle {
            width: 4px; height: 70px; background: #000; position: absolute; bottom: 0; left: 50%;
            transform-origin: bottom center; transform: rotate(-90deg); transition: transform 0.2s cubic-bezier(0.1, 1.5, 0.2, 1);
        }
        .gauge-val { font-family: 'Bangers'; font-size: 1.5rem; margin-top: 5px; }

        /* --- è§†è§‰å…ƒç´ ï¼šIDE --- */
        .ide-box { background: #1e1e1e; width: 90%; border-radius: 10px; overflow: hidden; border: 2px solid #000; color: #fff; }
        .ide-head { background: #333; padding: 10px; display: flex; gap: 10px; }
        .ide-tab { padding: 5px 15px; font-size: 0.8rem; cursor: pointer; color: #aaa; }
        .ide-tab.active { background: var(--primary); color: #fff; border-radius: 4px; }
        .ide-code { padding: 15px; font-family: 'Consolas', monospace; font-size: 0.9rem; min-height: 150px; color: #d4d4d4; }
        .c-kw { color: #569cd6; } .c-str { color: #ce9178; } .c-com { color: #6a9955; }

        /* --- è§†è§‰å…ƒç´ ï¼šç«é€Ÿæ¡ --- */
        .race-track { width: 90%; margin-bottom: 20px; }
        .race-label { display: flex; justify-content: space-between; font-weight: bold; font-size: 0.9rem; margin-bottom: 5px; }
        .race-bar-bg { width: 100%; height: 30px; background: #ddd; border: 2px solid #000; border-radius: 4px; position: relative; overflow: hidden; }
        .race-bar-fill { height: 100%; width: 0%; display: flex; align-items: center; justify-content: flex-end; padding-right: 10px; color: white; font-weight: bold; transition: width 1.5s cubic-bezier(0.25, 1, 0.5, 1); }
        .win-flag { display: none; margin-left: 10px; color: var(--accent); font-size: 1.2rem; }

        /* --- è§†è§‰å…ƒç´ ï¼šä½œæˆ˜åœ°å›¾ --- */
        .mission-map { display: flex; flex-direction: column; gap: 20px; width: 80%; }
        .mission-card { 
            background: white; border: 2px solid #000; padding: 15px; border-radius: 10px; 
            display: flex; gap: 15px; align-items: center; opacity: 0.5; transition: all 0.5s;
            transform: translateX(-20px);
        }
        .mission-card.active { opacity: 1; transform: translateX(0); box-shadow: 5px 5px 0 var(--purple); }
        .mission-icon { 
            width: 50px; height: 50px; background: #eee; border-radius: 50%; 
            display: flex; align-items: center; justify-content: center; font-size: 1.2rem; 
            border: 2px solid #000; flex-shrink: 0;
        }
        .mission-card.active .mission-icon { background: var(--purple); color: white; }
        .check-mark { margin-left: auto; color: var(--success); font-size: 1.5rem; display: none; }

        /* --- å¯¼èˆªæ  --- */
        .nav-bar {
            position: sticky; top: 20px; z-index: 100; display: flex; justify-content: center; gap: 15px; margin-bottom: -40px;
        }

        /* å“åº”å¼ */
        @media (max-width: 900px) {
            .comic-panel { grid-template-columns: 1fr; }
            .visual-col { height: 300px; border-left: none; border-top: var(--border); }
        }
    </style>
</head>
<body>

    <canvas id="canvas-bg"></canvas>

    <div class="nav-bar">
        <button class="btn active" onclick="setMode('story')" id="btn-story">ğŸ“– æ¼«ç”»æ•…äº‹æ¨¡å¼</button>
        <button class="btn" onclick="setMode('tech')" id="btn-tech">âš™ï¸ æå®¢æ¶æ„æ¨¡å¼</button>
    </div>

    <div style="height: 90vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; color: white;">
        <div style="font-family: 'Bangers'; font-size: 2rem; color: var(--accent);">HORIZON ROBOTICS (åœ°å¹³çº¿) CASE STUDY</div>
        <h1 style="font-family: 'Bangers'; font-size: 4rem; margin: 10px 0; text-shadow: 4px 4px 0 #3b82f6;">æ•°æ®æŒ–æ˜æ¶æ„æ¼”è¿›å²</h1>
        <p style="font-size: 1.2rem; max-width: 600px; color: #ddd;">
            300PB æ•°æ®ã€10 ä¸‡å¹¶å‘ä¸ Alluxio çš„æ€§èƒ½çªå›´
        </p>
        <i class="fas fa-chevron-down fa-bounce" style="margin-top: 40px; font-size: 2rem;"></i>
    </div>

    <div class="section">
        <div class="comic-panel">
            <div class="speed-lines"></div>
            <div class="content-col">
                <h2 class="comic-title text-danger" id="t1-title">ğŸ”¥ ç¬¬ä¸€ç« ï¼šæ‹¥å µçš„å›¾ä¹¦é¦†</h2>
                <div id="t1-story" class="fade-in">
                    <div class="speech-bubble">
                        <i class="fas fa-quote-left"></i> æˆ‘æ˜¯æ—§ç®¡ç†å‘˜ JFSã€‚ä»Šå¤©çªç„¶æ¥äº† <strong>10ä¸‡äºº</strong>ï¼ä»–ä»¬å…¨æŒ¤åœ¨é—¨å£é—®æˆ‘ä¹¦åœ¨å“ªã€‚
                    </div>
                    <p><strong>ç°çŠ¶ï¼š</strong> æ‰€æœ‰äººéƒ½è¦ç»è¿‡æˆ‘è¿™ä¸ªâ€œæ€»ç®¡â€æŸ¥ç›®å½•ã€‚æˆ‘å—“å­å–Šå“‘äº†ï¼Œå¤§å…è¿˜æ˜¯å µæ­»äº†ã€‚</p>
                </div>
                <div id="t1-tech" class="hidden fade-in">
                    <div class="speech-bubble" style="border-color: var(--primary);">Bottleneck: Centralized Metadata</div>
                    <p><strong>ç—›ç‚¹ï¼š</strong> Master èŠ‚ç‚¹å•ç‚¹ç“¶é¢ˆã€‚10 ä¸‡+ å¹¶å‘ä¸‹ Open/Lookup è¯·æ±‚å¤§é‡è¶…æ—¶ã€‚</p>
                </div>
            </div>
            <div class="visual-col" id="viz-arch">
                <div style="position: absolute; bottom: 10px; font-weight: bold; background: white; padding: 5px 10px; border: 2px solid black;">
                    é˜»å¡ç‡: <span id="val-block" class="text-danger">0%</span>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="comic-panel" style="border-color: var(--primary);">
            <div class="speed-lines"></div>
            <div class="visual-col" style="background: #eef2ff; padding: 20px;">
                <div style="font-weight: bold; margin-bottom: 10px;">Monitor: File Handles</div>
                <div style="display: flex; flex-wrap: wrap; justify-content: center;">
                    <div class="gauge-wrap">
                        <div class="gauge-body"><div class="gauge-gradient"></div><div class="gauge-needle" id="ndl-jfs"></div></div>
                        <div class="gauge-val text-danger" id="val-jfs">850</div>
                    </div>
                    <div class="gauge-wrap">
                        <div class="gauge-body"><div class="gauge-gradient"></div><div class="gauge-needle" id="ndl-all"></div></div>
                        <div class="gauge-val text-success" id="val-all">150</div>
                    </div>
                </div>
                <button class="btn" style="margin: 20px 0; font-size: 1rem;" onclick="simStress()">ğŸ’¥ åŠ å‹æµ‹è¯•</button>
            </div>
            <div class="content-col">
                <h2 class="comic-title text-accent" id="t2-title">ğŸ˜° ç¬¬äºŒç« ï¼šå·¨äººæ‰‹æ»‘å±æœº</h2>
                <div id="t2-story" class="fade-in">
                    <div class="speech-bubble">
                        <i class="fas fa-hand-paper"></i> <span class="text-danger">æ‰‹ä¸å¤Ÿç”¨äº†ï¼</span> è€æ¿è§„å®šæˆ‘åªèƒ½æ‹¿ 1000 æœ¬ä¹¦ï¼ˆå¥æŸ„ï¼‰ã€‚JFS æ¨¡å¼ä¸‹ï¼Œæˆ‘ä¸ºäº†å¿«ï¼Œæ—¶åˆ»æç€ 800 å¤šæœ¬ã€‚
                    </div>
                </div>
                <div id="t2-tech" class="hidden fade-in">
                    <p><strong>Constraint: File Handles</strong></p>
                    <ul>
                        <li><strong>Risk:</strong> JFS å ç”¨ ~850 å¥æŸ„ï¼Œæ¥è¿‘ `ulimit -n 1000` å´©æºƒçº¿ã€‚</li>
                        <li><strong>Solution:</strong> Alluxio SDK è¿æ¥å¤ç”¨ï¼Œå¥æŸ„å ç”¨æä½ã€‚</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="comic-panel">
            <div class="speed-lines"></div>
            <div class="content-col">
                <h2 class="comic-title text-success" id="t3-title">ğŸš€ ç¬¬ä¸‰ç« ï¼šæ™ºèƒ½å¹³æ¿æ—¶ä»£</h2>
                <div id="t3-story" class="fade-in">
                    <p>ä»¥å‰è¦åŠç¹ççš„â€œå®ä½“å€Ÿä¹¦è¯â€ï¼ˆFUSEï¼‰ã€‚ç°åœ¨ï¼ŒAlluxio ç»™æ¯äººå‘äº†<strong>â€œæ™ºèƒ½å¹³æ¿â€</strong> (SDK)ã€‚</p>
                    <ul style="list-style: none;">
                        <li>âœ… <strong>å…åŠè¯ï¼š</strong> ä¸ç”¨æŒ‚è½½ã€‚</li>
                        <li>âœ… <strong>æé€Ÿç¿»é¡µï¼š</strong> æ”¯æŒè·³é¡µ (Seek)ã€‚</li>
                    </ul>
                </div>
                <div id="t3-tech" class="hidden fade-in">
                    <p><strong>FUSE vs SDK:</strong></p>
                    <ul>
                        <li><strong>Legacy:</strong> FUSE ä¸Šä¸‹æ–‡åˆ‡æ¢æµªè´¹ 112 æ ¸ç®—åŠ›ã€‚</li>
                        <li><strong>Modern:</strong> çº¯ç”¨æˆ·æ€ç›´è¿ (Zero-Copy)ã€‚</li>
                    </ul>
                </div>
            </div>
            <div class="visual-col" style="background: #252526; display: block; padding: 0;">
                <div class="ide-box" style="margin: 20px auto; width: 90%;">
                    <div class="ide-head">
                        <div class="ide-tab active" onclick="switchCode('jfs')" id="tab-jfs">JFS</div>
                        <div class="ide-tab" onclick="switchCode('all')" id="tab-all">Alluxio</div>
                    </div>
                    <div class="ide-code" id="code-area"></div>
                    <div style="background: #111; padding: 10px; font-family: monospace; font-size: 0.8rem; color: #0f0; border-top: 1px solid #333; height: 60px;" id="console-log">> Ready...</div>
                </div>
                <div style="text-align: center;"><button class="btn" onclick="runCode()" style="font-size: 1rem;">â–¶ è¿è¡Œä»¿çœŸ</button></div>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="comic-panel" style="border-color: #000; box-shadow: 15px 15px 0 var(--primary);">
            <div class="speed-lines" style="background: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(59, 130, 246, 0.05) 10px, rgba(59, 130, 246, 0.05) 20px);"></div>
            <div class="visual-col" style="background: #fff; padding: 30px; display: flex; align-items: center;">
                <h3 style="text-align: center; font-family: 'Bangers'; margin-top: 0;">ğŸ† BENCHMARK: 7.3GB FILE</h3>
                <div class="race-track">
                    <div class="race-label"><span>JuiceFS (Hot Read)</span><span>221 MB/s</span></div>
                    <div class="race-bar-bg"><div class="race-bar-fill" id="race-bar-jfs" style="width: 0%; background: #9ca3af;">221</div></div>
                </div>
                <div class="race-track">
                    <div class="race-label"><span class="text-primary">Alluxio (Hot Read)</span><span class="text-primary">280.7 MB/s</span></div>
                    <div class="race-bar-bg"><div class="race-bar-fill" id="race-bar-all" style="width: 0%; background: var(--primary);">280.7 <i class="fas fa-flag-checkered win-flag" id="win-flag"></i></div></div>
                </div>
                <div style="text-align: center; margin-top: 30px;"><button class="btn active" onclick="startFinalRace()">ğŸ å¼€è·‘</button></div>
            </div>
            <div class="content-col">
                <h2 class="comic-title text-primary" id="t4-title">âš”ï¸ ç¬¬å››ç« ï¼šç»ˆæå¯¹å†³</h2>
                <div id="t4-story" class="fade-in">
                    <div class="speech-bubble"><i class="fas fa-trophy"></i> èµ¢äº†ï¼Alluxio é£™åˆ°äº† <strong>280.7 MB/s</strong>ï¼</div>
                    <p>åœ¨å• Topic æ–‡ä»¶è¯»å–æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…æ¯” JFS å¿«ï¼Œè€Œä¸”æ‰‹ä¸æŠ–ï¼ˆå¥æŸ„ä½ï¼‰ï¼</p>
                </div>
                <div id="t4-tech" class="hidden fade-in">
                    <p><strong>Benchmark Result:</strong></p>
                    <ul>
                        <li><strong>JuiceFS Hot Read:</strong> 221 MB/s.</li>
                        <li><strong>Alluxio Hot Read:</strong> 280.71 MB/s (+27%).</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="comic-panel" style="border-color: var(--purple);">
            <div class="speed-lines" style="background: radial-gradient(circle, transparent 20%, rgba(139, 92, 246, 0.1) 100%);"></div>
            
            <div class="content-col">
                <h2 class="comic-title text-purple" id="t5-title">ğŸ—ºï¸ ç¬¬äº”ç« ï¼šå®ä¼Ÿè“å›¾</h2>
                <div id="t5-story" class="fade-in">
                    <div class="speech-bubble" style="border-color: var(--purple);">
                        <i class="fas fa-scroll"></i> æ¯”èµ›åªæ˜¯å¼€å§‹ã€‚POC è®¡åˆ’åˆ†ä¸‰æ­¥èµ°ï¼šæ¢è„‘æ‰‹æœ¯ã€é­”é¬¼ç‰¹è®­ã€å¤åˆ¶å·¨äººã€‚
                    </div>
                </div>
                <div id="t5-tech" class="hidden fade-in">
                    <p><strong>POC Roadmap:</strong></p>
                    <ul>
                        <li><strong>Step 1:</strong> é›†æˆ SDKï¼ŒBypass FUSEã€‚</li>
                        <li><strong>Step 2:</strong> éªŒè¯å†·çƒ­è¯»ä¸å¤š Topic åœºæ™¯ã€‚</li>
                        <li><strong>Step 3:</strong> æ‰©å±•è‡³ 10+ èŠ‚ç‚¹ï¼Œ1000 å¹¶å‘ã€‚</li>
                    </ul>
                </div>
            </div>

            <div class="visual-col" style="background: #fdf4ff;">
                <div class="mission-map" id="mission-list">
                    <div class="mission-card" id="m-card-1">
                        <div class="mission-icon"><i class="fas fa-plug"></i></div>
                        <div><div style="font-weight: bold;">INTEGRATION</div><div style="font-size: 0.8rem;">Embed SDK</div></div>
                        <div class="check-mark" id="m-check-1"><i class="fas fa-check-circle"></i></div>
                    </div>
                    <div class="mission-card" id="m-card-2">
                        <div class="mission-icon"><i class="fas fa-thermometer-half"></i></div>
                        <div><div style="font-weight: bold;">VALIDATION</div><div style="font-size: 0.8rem;">Scenario Test</div></div>
                        <div class="check-mark" id="m-check-2"><i class="fas fa-check-circle"></i></div>
                    </div>
                    <div class="mission-card" id="m-card-3">
                        <div class="mission-icon"><i class="fas fa-users"></i></div>
                        <div><div style="font-weight: bold;">SCALE OUT</div><div style="font-size: 0.8rem;">10+ Nodes</div></div>
                        <div class="check-mark" id="m-check-3"><i class="fas fa-check-circle"></i></div>
                    </div>
                </div>
                <div style="margin-top: 30px; text-align: center;">
                    <button class="btn" style="background: var(--purple); color: white;" onclick="startMission()">ğŸš€ å¯åŠ¨ POC</button>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="comic-panel" style="border-color: #333; box-shadow: 15px 15px 0 #333;">
            <div class="content-col">
                <h2 class="comic-title" id="t6-title">ğŸ“Š ç¬¬å…­ç« ï¼šæµ‹è¯•ç»“è®º</h2>
                
                <div id="t6-story" class="fade-in">
                    <div class="speech-bubble">
                        <i class="fas fa-lightbulb"></i> <span style="font-weight:bold;">ä¸‰å¤§å‘ç°ï¼š</span>
                    </div>
                    <ul style="line-height: 1.8; list-style: none; padding: 0;">
                        <li><i class="fas fa-check-circle text-success"></i> <strong>è®°æ€§å¥½å°±æ˜¯å¿«ï¼š</strong> åªè¦æˆ‘çœ‹è¿‡ä¸€éï¼ˆçƒ­è¯»ï¼‰ï¼Œé€Ÿåº¦å°±èƒ½èµ·é£ã€‚</li>
                        <li><i class="fas fa-check-circle text-success"></i> <strong>çŒœä½ ä¼šè¯»ï¼š</strong> å¼€å¯é¢„è¯» (Prefetch)ï¼Œé€Ÿåº¦ç›´æ¥ç¿»å€ï¼</li>
                        <li><i class="fas fa-exclamation-circle text-accent"></i> <strong>æŒ‘é£Ÿæ¯”è¾ƒæ…¢ï¼š</strong> è¯»ä¸€æ•´æœ¬ä¹¦å¾ˆå¿«ï¼›å¦‚æœåªè¦æŒ‘å‡ é¡µè¯»ï¼Œç­›é€‰è¿‡ç¨‹ä¼šæ…¢ä¸€äº›ã€‚</li>
                    </ul>
                    <div style="margin-top: 20px; font-weight: bold; color: var(--purple);">
                        æœªæ¥å¤§æ‹›ï¼š<br>æˆ‘æ­£åœ¨å­¦ä¹ â€œè¯»å¿ƒæœ¯â€ (Seek Preload)ï¼Œä½ æƒ³ç¿»å“ªé¡µï¼Œæˆ‘æå‰å¸®ä½ å¤‡å¥½ï¼
                    </div>
                </div>

                <div id="t6-tech" class="hidden fade-in">
                    <p><strong>Test Analysis:</strong></p>
                    <ul style="font-size: 0.9rem; line-height: 1.6;">
                        <li><strong>Cache Benefit:</strong> çƒ­è¯»æ€§èƒ½æ˜¾è‘—ä¼˜äºå†·è¯»ï¼Œè¯æ˜ Alluxio ç¼“å­˜æœ‰æ•ˆæ€§ã€‚</li>
                        <li><strong>Prefetch Impact:</strong> å¼€å¯ Prefetch ååé‡æå‡è¿‘ 2 å€ (<strong>10.19 MB/s -> 29.34 MB/s</strong>)ã€‚</li>
                        <li><strong>Read Pattern:</strong> é¡ºåºè¯»å– (280 MB/s) è¿œå¿«äºå¤š Topic ç­›é€‰è¯»å– (29 MB/s)ï¼Œç­›é€‰æœ‰é¢å¤–å¼€é”€ã€‚</li>
                    </ul>
                    <p><strong>Optimization Plan:</strong></p>
                    <p style="font-size: 0.9rem;">Client <code>seek()</code> æ—¶è§¦å‘ async preloadã€‚éœ€ç ”ç©¶ Access Pattern å†³å®šæ˜¯é¢„åŠ è½½å…¨æ–‡ä»¶è¿˜æ˜¯ä»… Index/Metaã€‚</p>
                </div>
            </div>

            <div class="visual-col" style="background: #fff; display: flex; align-items: center; justify-content: center;">
                <div class="insight-grid">
                    <div class="insight-card">
                        <div class="insight-icon text-primary"><i class="fas fa-forward"></i></div>
                        <div class="insight-desc">Prefetch å¼€å¯åååæå‡</div>
                        <div class="insight-val">2x UP</div>
                        <div class="insight-desc" style="font-size: 0.7rem;">(10.19 -> 29.34 MB/s)</div>
                    </div>
                    
                    <div class="insight-card">
                        <div class="insight-icon text-success"><i class="fas fa-fire"></i></div>
                        <div class="insight-desc">å• Topic çƒ­è¯»åå</div>
                        <div class="insight-val">280 MB/s</div>
                        <div class="insight-desc" style="font-size: 0.7rem;">(è¿œè¶…å†·è¯»æ€§èƒ½)</div>
                    </div>

                    <div class="insight-card">
                        <div class="insight-icon text-accent"><i class="fas fa-filter"></i></div>
                        <div class="insight-desc">å¤š Topic ç­›é€‰è¯»å–</div>
                        <div class="insight-val">29 MB/s</div>
                        <div class="insight-desc" style="font-size: 0.7rem;">(ç­›é€‰å¼€é”€è¾ƒå¤§)</div>
                    </div>

                    <div class="insight-card" style="border-color: var(--purple);">
                        <div class="insight-icon text-purple"><i class="fas fa-brain"></i></div>
                        <div class="insight-desc">å†·è¯»ä¼˜åŒ–æ–¹å‘</div>
                        <div class="insight-val" style="font-size: 1.2rem;">Seek Preload</div>
                        <div class="insight-desc" style="font-size: 0.7rem;">(Trigger on seek)</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- å…¨å±€æ§åˆ¶ ---
        let mode = 'story';
        function setMode(m) {
            mode = m;
            document.getElementById('btn-story').className = m === 'story' ? 'btn active' : 'btn';
            document.getElementById('btn-tech').className = m === 'tech' ? 'btn active' : 'btn';
            
            const storyEls = document.querySelectorAll('[id$="-story"]');
            const techEls = document.querySelectorAll('[id$="-tech"]');
            storyEls.forEach(el => el.classList.toggle('hidden', m !== 'story'));
            techEls.forEach(el => el.classList.toggle('hidden', m !== 'tech'));

            // æ›´æ–°æ ‡é¢˜
            const titles = {
                t1: ["ğŸ”¥ ç¬¬ä¸€ç« ï¼šæ‹¥å µçš„å›¾ä¹¦é¦†", "âš ï¸ Chap 1: Architecture Bottleneck"],
                t2: ["ğŸ˜° ç¬¬äºŒç« ï¼šå·¨äººæ‰‹æ»‘å±æœº", "âš ï¸ Chap 2: Resource Constraints"],
                t3: ["ğŸš€ ç¬¬ä¸‰ç« ï¼šæ™ºèƒ½å¹³æ¿æ—¶ä»£", "ğŸ’» Chap 3: SDK Integration"],
                t4: ["âš”ï¸ ç¬¬å››ç« ï¼šç»ˆæå¯¹å†³", "ğŸ“Š Chap 4: Benchmark Results"],
                t5: ["ğŸ—ºï¸ ç¬¬äº”ç« ï¼šå®ä¼Ÿè“å›¾", "ğŸ—“ï¸ Chap 5: POC Roadmap"],
                t6: ["ğŸ“Š ç¬¬å…­ç« ï¼šæµ‹è¯•ç»“è®º", "ğŸ“ Chap 6: Summary & Analysis"]
            };
            for (let k in titles) document.getElementById(k + '-title').innerText = m === 'story' ? titles[k][0] : titles[k][1];
            
            resetVisuals();
        }

        function resetVisuals() {
            startArchAnim();
            document.getElementById('race-bar-jfs').style.width = '0%';
            document.getElementById('race-bar-all').style.width = '0%';
            document.getElementById('win-flag').style.display = 'none';
            // Reset Mission
            for(let i=1; i<=3; i++) {
                document.getElementById(`m-card-${i}`).classList.remove('active');
                document.getElementById(`m-check-${i}`).style.display = 'none';
            }
        }

        // --- åŠ¨ç”»é€»è¾‘ ---
        // 1. æ¶æ„ (Placeholder)
        function startArchAnim() {
            const el = document.getElementById('viz-arch');
            el.innerHTML = '<div style="position: absolute; bottom: 10px; font-weight: bold; background: white; padding: 5px 10px; border: 2px solid black;">Status: Idle</div>';
        }

        // 2. åŠ å‹
        function simStress() {
            const ndlJ = document.getElementById('ndl-jfs'); const valJ = document.getElementById('val-jfs');
            let v = 800;
            const t = setInterval(() => {
                v = 800 + Math.random() * 200; if(v>1000) v=1000;
                ndlJ.style.transform = `rotate(${((v/1000)*180)-90}deg)`;
                valJ.innerText = Math.floor(v);
            }, 50);
            setTimeout(() => clearInterval(t), 2000);
        }

        // 3. ç»ˆæç«é€Ÿ
        function startFinalRace() {
            const bJ = document.getElementById('race-bar-jfs');
            const bA = document.getElementById('race-bar-all');
            const f = document.getElementById('win-flag');
            bJ.style.width = '0%'; bA.style.width = '0%'; f.style.display='none';
            setTimeout(() => {
                bJ.style.width = '78%'; bA.style.width = '100%';
                setTimeout(() => { f.style.display = 'inline-block'; f.classList.add('fade-in'); }, 1500);
            }, 100);
        }

        // 4. å®ä¼Ÿè“å›¾
        function startMission() {
            const steps = [1, 2, 3];
            steps.forEach((s, i) => {
                setTimeout(() => {
                    document.getElementById(`m-card-${s}`).classList.add('active');
                    setTimeout(() => {
                        document.getElementById(`m-check-${s}`).style.display = 'block';
                        document.getElementById(`m-check-${s}`).classList.add('fade-in');
                    }, 500);
                }, i * 800);
            });
        }

        // 5. Code Sim
        let codeMode = 'jfs';
        const cJfs = `import os\nos.system("mount -t juicefs...")`;
        const cAll = `from alluxio import Client\nclient = Client("cluster")`;
        function switchCode(m) { codeMode = m; document.getElementById('code-area').innerText = m==='jfs'?cJfs:cAll; }
        function runCode() { document.getElementById('console-log').innerHTML = codeMode==='jfs' ? "<span style='color:red'>[WARN] High CPU</span>" : "<span style='color:#0f0'>[INFO] Zero-Copy OK</span>"; }

        // Init
        setMode('story');
        switchCode('jfs');
    </script>
</body>
</html>
